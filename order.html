<!DOCTYPE html>
<html lang="en">
<head>
    <!-- basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- site metas -->
    <title>TasteSwift</title>
    <meta name="keywords" content="Order food delivery menu Restaurants" />
    <meta name="description" content="A website for ordering food items and getting them delivered." />
    <meta name="author" content="Group Proj" />
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <!-- Responsive -->
    <link rel="stylesheet" href="css/responsive.css" />
    <!-- favicon -->
    <link rel="icon" href="images/fevicon.png" type="image/png" />
    <!-- font css -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap" rel="stylesheet" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css" />
    <!-- Tweaks for older IEs -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
    <style>
        .form-group {
            margin-bottom: 1.5rem;
        }
        .price-display {
            position: fixed;
            right: 20px;
            bottom: 20px;
            padding: 10px;
            background-color: #f8f9fa;
            border: 1px solid #ced4da;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="index.html"><h1 class="logo">TasteSwift</h1></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html"><span class="padding5"><i class="fa fa-angle-right"></i></span>Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="menu.html"><span class="padding5"><i class="fa fa-angle-right"></i></span>Menu</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="order.html"><span class="padding5"><i class="fa fa-angle-right"></i></span>Order</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <div class="login_bt">
                        <ul>
                            <li><a href="login.html">Login</a></li>
                            <li><a href="#"><i class="fa fa-user" aria-hidden="true"></i></a></li>
                        </ul>
                    </div>
                </form>
            </div>
        </nav>
    </div>
    <div class="container mt-5">
        <h2>Fill in your Order</h2>
        <form action="order.php" method="POST">
            <div class="form-group">
                <label for="city">Select City</label>
                <select class="form-control" id="city" name="city" required onchange="updateRestaurants()">
                    <option value="" disabled selected>Select City</option>
                    <option value="Nairobi">Nairobi</option>
                    <option value="Mombasa">Mombasa</option>
                    <option value="Kisumu">Kisumu</option>
                </select>
            </div>
            <div class="form-group">
                <label for="restaurant">Select Restaurant</label>
                <select class="form-control" id="restaurant" name="restaurant" required>
                    <option value="" disabled selected>Select Restaurant</option>
                </select>
            </div>
            <div class="form-group">
                <label for="pizzaSize">Pizza Size</label>
                <select class="form-control" id="pizzaSize" name="pizza_size" required onchange="updatePrice()">
                    <option value="" disabled selected>Select Size</option>
                    <option value="small">Small</option>
                    <option value="medium">Medium</option>
                    <option value="large">Large</option>
                </select>
            </div>
            <div class="form-group">
                <label for="pizzaType">Pizza Type</label>
                <select class="form-control" id="pizzaType" name="pizza_type" required onchange="updatePrice()">
                    <option value="" disabled selected>Select Pizza</option>
                    <option value="margherita" data-base-price="5">Margherita</option>
                    <option value="pepperoni" data-base-price="8">Pepperoni</option>
                    <option value="bbqChicken" data-base-price="10">BBQ Chicken</option>
                    <option value="veggie" data-base-price="7">Veggie</option>
                </select>
            </div>
            <div class="form-group">
                <label for="paymentMethod">Payment Method</label>
                <select class="form-control" id="paymentMethod" name="payment_method" required onchange="updatePaymentMethod()">
                    <option value="" disabled selected>Select Payment Method</option>
                    <option value="mpesa">Mpesa</option>
                    <option value="paypal">PayPal</option>
                    <option value="card">Card</option>
                </select>
            </div>
            <div id="paymentDetails">
                <div id="mpesaDetails" class="hidden">
                    <div class="form-group">
                        <label for="mpesaPhone">Mpesa Phone Number</label>
                        <input type="text" class="form-control" id="mpesaPhone" name="mpesa_phone" placeholder="Enter phone number (+254...)" />
                    </div>
                </div>
                <div id="paypalDetails" class="hidden">
                    <div class="form-group">
                        <label for="paypalEmail">PayPal Email</label>
                        <input type="email" class="form-control" id="paypalEmail" name="paypal_email" placeholder="Enter PayPal email" />
                    </div>
                </div>
                <div id="cardDetails" class="hidden">
                    <div class="form-group">
                        <label for="cardNumber">Card Number</label>
                        <input type="text" class="form-control" id="cardNumber" name="card_number" placeholder="Enter card number" />
                    </div>
                    <div class="form-group">
                        <label for="cardExpiry">Expiry Date</label>
                        <input type="text" class="form-control" id="cardExpiry" name="card_expiry" placeholder="MM/YY" />
                    </div>
                    <div class="form-group">
                        <label for="cardCVC">CVC</label>
                        <input type="text" class="form-control" id="cardCVC" name="card_cvc" placeholder="CVC" />
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" class="form-control" id="address" name="address" placeholder="Enter your address" required />
            </div>
            <input type="hidden" id="totalPrice" name="total_price" value="0.00">
            <button type="submit" class="btn btn-primary">Submit Order</button>
        </form>
    </div>
    <div class="price-display">
        <h4>Total Price: <span id="price">$0.00</span></h4>
    </div>
    <script>
        const restaurants = {
            Nairobi: ["Restaurant 1", "Restaurant 2", "Restaurant 3"],
            Mombasa: ["Restaurant A", "Restaurant B", "Restaurant C"],
            Kisumu: ["Restaurant X", "Restaurant Y", "Restaurant Z"]
        };

        function updateRestaurants() {
            const city = document.getElementById("city").value;
            const restaurantSelect = document.getElementById("restaurant");

            restaurantSelect.innerHTML = '<option value="" disabled selected>Select Restaurant</option>';
            if (city && restaurants[city]) {
                restaurants[city].forEach(restaurant => {
                    const option = document.createElement("option");
                    option.value = restaurant;
                    option.textContent = restaurant;
                    restaurantSelect.appendChild(option);
                });
            }
        }

        function updatePrice() {
            const pizzaSize = document.getElementById("pizzaSize").value;
            const pizzaType = document.getElementById("pizzaType");
            const selectedPizzaType = pizzaType.options[pizzaType.selectedIndex];
            const basePrice = parseFloat(selectedPizzaType.getAttribute("data-base-price")) || 0;

            let sizeMultiplier = 1;
            if (pizzaSize === "medium") sizeMultiplier = 1.5;
            if (pizzaSize === "large") sizeMultiplier = 2;

            const totalPrice = (basePrice * sizeMultiplier).toFixed(2);
            document.getElementById("totalPrice").value = totalPrice;
            document.getElementById("price").textContent = `$${totalPrice}`;
        }

        function updatePaymentMethod() {
            const paymentMethod = document.getElementById("paymentMethod").value;
            document.getElementById("mpesaDetails").classList.toggle("hidden", paymentMethod !== "mpesa");
            document.getElementById("paypalDetails").classList.toggle("hidden", paymentMethod !== "paypal");
            document.getElementById("cardDetails").classList.toggle("hidden", paymentMethod !== "card");
        }
    </script>
    <!-- bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- custom js -->
    <script src="js/custom.js"></script>
</body>
</html>
